<header>
  <div class="relative">
    <!-- tagline + user menu for large screens (for mobile screens it's inside the menu)  -->
    <div
      class="hidden lg:flex bg-gray-900 text-gray-500 px-6 py-2 text-sm items-center justify-between"
    >
      <div>
        Sito libero e gratuito di Informazione dove puoi anche...
      </div>
      <div x-data="{userMenuItems:userMenuItems}">
        <ul class="flex flex-row">
          <template x-for="userMenuItem in userMenuItems">
            <li class="mx-2 flex items-center">
              <a
                :href="userMenuItem.link"
                :class="{'flex items-center justify-center bg-gray-500 text-gray-900 hover:bg-gray-200 hover:text-blue-700 focus:text-blue-700 focus:bg-gray-200 focus:outline-none focus:shadow-outline rounded  px-2 py-1': userMenuItem.text === 'Login', 'hover:text-gray-400': userMenuItem.text !== 'Login'}"
              >
                <svg
                  x-show="userMenuItem.text==='Login'"
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  class="mr-2 w-4 h-4"
                  fill="currentColor"
                >
                  <path
                    d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm7.753 18.305c-.261-.586-.789-.991-1.871-1.241-2.293-.529-4.428-.993-3.393-2.945 3.145-5.942.833-9.119-2.489-9.119-3.388 0-5.644 3.299-2.489 9.119 1.066 1.964-1.148 2.427-3.393 2.945-1.084.25-1.608.658-1.867 1.246-1.405-1.723-2.251-3.919-2.251-6.31 0-5.514 4.486-10 10-10s10 4.486 10 10c0 2.389-.845 4.583-2.247 6.305z"
                  />
                </svg>
                <span x-text="userMenuItem.text"></span>
              </a>
            </li>
          </template>
        </ul>
      </div>
    </div>

    <!-- Logo and menu container -->

    <div
      x-data="{ menuOpen: false, currentMenu: '', currentSubmenu:location.pathname.split('/').slice(-1)[0], menuFromRoute: findMenu(location.pathname.split('/').slice(-1)[0]), menuItems:menuItems, userMenuItems: userMenuItems}"
      class="w-full h-full flex flex-wrap items-center bg-gradient-to-b from-blue-700 to-blue-800 lg:py-0 py-2 px-6 lg:px-0"
    >
      <!-- Logo, ad, hamburger -->
      <div class="w-full max-w-6xl mx-auto flex items-center justify-between">
        <!-- logo -->
        <div
          id="logo"
          class="flex-1 flex justify-start lg:py-6  lg:mt-3  items-center"
        >
          <a href="#" class="text-white text-3xl font-black">
            news.<span class="text-orange-500 text-2xl  ">ABC24</span>.it
          </a>
        </div>

        <!-- Ad area -->
        <div
          id="header-sponsored"
          class="hidden lg:flex items-center justify-around p-4 "
        >
          <div
            placeholder
            for
            ad
            style="width: 728px; height: 90px; background-color: black; color: cadetblue; padding: 5px; "
          >
            advertisement
          </div>
        </div>

        <!-- hamburger -->
        <button
          class="lg:hidden rounded-lg focus:outline-none focus:shadow-outline text-gray-200 "
          @click="menuOpen = !menuOpen"
        >
          <svg fill="currentColor" viewBox="0 0 20 20" class="w-6 h-6">
            <path
              x-show="!menuOpen"
              fill-rule="evenodd"
              d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3
                   10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3
                   15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 1 01-1-1zM3
               "
              clip-rule="evenodd"
            ></path>
            <path
              x-show="menuOpen"
              fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd"
            ></path>
          </svg>
        </button>
      </div>

      <!-- menu -->
      <div
        class="w-full  lg:py-0 py-2 lg:block"
        :class="{'flex': menuOpen, 'hidden': !menuOpen}"
        x-on:mouseleave="currentMenu=menuFromRoute"
        id="menu"
      >
        <nav class="w-full max-w-6xl mx-auto px-6 lg:px-0">
          <ul
            class="w-full lg:flex items-end text-sm text-gray-200 pt-4 lg:pt-0"
          >
            <!-- Menu start *********************************************************************************************************-->

            <template x-for="(menuItem, index) in menuItems" :key="index">
              <li x-on:mouseover="currentMenu=menuItem.path">
                <!-- for the home menu, show a home icon -->
                <template x-if="menuItem.text==='Home'">
                  <div class="w-full relative">
                    <a
                      class="border-b-4 border-transparent hover:border-orange-500 focus:border-orange-500 flex items-center w-full p-5  border-orange-500"
                    >
                      <svg
                        fill="currentColor"
                        viewBox="0 0 24 24"
                        class="w-4 h-4 transition-transform duration-200 transform"
                      >
                        <path
                          d="M12 6.453l9 8.375v9.172h-6v-6h-6v6h-6v-9.172l9-8.375zm12 5.695l-12-11.148-12 11.133 1.361 1.465 10.639-9.868 10.639 9.883 1.361-1.465z"
                        />
                      </svg>
                    </a>
                  </div>
                </template>
                <!-- for the rest of the items, show a normal menu item -->
                <template x-if="menuItem.text!=='Home'">
                  <div
                    class="w-full relative"
                    @click.away="menuItem.open = false"
                  >
                    <button
                      @click="menuItem.open = !menuItem.open"
                      class="outline-none focus:outline-none border-b-4 border-transparent  hover:border-orange-500 focus:border-orange-500  flex items-center w-full px-3"
                    >
                      <span
                        class="lg:hidden block text-left lg:py-4 lg:px-2 py-3 px-0 flex-1 "
                        x-text="menuItem.text"
                      ></span>
                      <a
                        class="hidden lg:block text-left flex-1 py-3 px-0"
                        :href="`${menuItem.path}`"
                        x-text="menuItem.text"
                      ></a
                      ><span>
                        <svg
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          :class="{'rotate-180': menuItem.open, 'rotate-0': !menuItem.open}"
                          class="w-4 h-4 transition-transform duration-200 transform lg:hidden"
                        >
                          <path
                            fill-rule="evenodd"
                            d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                            clip-rule="evenodd"
                          ></path>
                        </svg>
                      </span>
                    </button>
                    <!-- submenu for mobile screens -->
                    <div
                      x-show="menuItem.open"
                      x-transition:enter="transition ease-out duration-100"
                      x-transition:enter-start="transform opacity-0 scale-95"
                      x-transition:enter-end="transform opacity-100 scale-100"
                      x-transition:leave="transition ease-in duration-75"
                      x-transition:leave-start="transform opacity-100 scale-100"
                      x-transition:leave-end="transform opacity-0 scale-95"
                      class="absolute w-full origin-top-right rounded-md shadow-lg lg:hidden z-50"
                    >
                      <div
                        class="px-2 py-2 bg-gray-300 text-gray-800 rounded-md rounded-t-none shadow"
                      >
                        <a
                          class="block lg:hidden px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-md hover:text-gray-900 focus:text-gray-900  focus:outline-none focus:shadow-outline"
                          :href="`${menuItem.path}`"
                          >All</a
                        >
                        <template
                          x-for="submenuItem in menuItem.submenuItems"
                          :key="submenuItem.id"
                        >
                          <a
                            class="block px-4 py-2 mt-2 text-sm font-semibold bg-transparent rounded-md hover:text-gray-900 focus:text-gray-900  focus:outline-none focus:shadow-outline"
                            :href="`${submenuItem.link}`"
                            x-text="submenuItem.text"
                          ></a>
                        </template>
                      </div>
                    </div>
                  </div>
                </template>
              </li>
            </template>

            <!-- Menu end *********************************************************************************************************-->

            <!-- user menu for mobile screens -->
            <hr class="w-full lg:hidden my-2" />
            <template x-for="userMenuItem in userMenuItems">
              <li
                class="lg:hidden text-xs py-2 px-3 mt-2 "
                :class="{'hover:text-blue-100 hover:bg-blue-700': userMenuItem.text!=='Login'}"
              >
                <a
                  :href="userMenuItem.link"
                  :class="{'flex lg:hidden items-center max-w-24 text-xs border justify-center bg-gray-200 text-blue-700 hover:bg-blue-700 hover:text-gray-200 focus:bg-blue-700 focus:text-gray-200 focus:outline-none focus:shadow-outline rounded py-2 px-3': userMenuItem.text === 'Login'}"
                >
                  <svg
                    x-show="userMenuItem.text==='Login'"
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    class="mr-2 w-4 h-4"
                    fill="currentColor"
                  >
                    <path
                      d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm7.753 18.305c-.261-.586-.789-.991-1.871-1.241-2.293-.529-4.428-.993-3.393-2.945 3.145-5.942.833-9.119-2.489-9.119-3.388 0-5.644 3.299-2.489 9.119 1.066 1.964-1.148 2.427-3.393 2.945-1.084.25-1.608.658-1.867 1.246-1.405-1.723-2.251-3.919-2.251-6.31 0-5.514 4.486-10 10-10s10 4.486 10 10c0 2.389-.845 4.583-2.247 6.305z"
                    />
                  </svg>
                  <span x-text="userMenuItem.text"></span>
                </a>
              </li>
            </template>
          </ul>
        </nav>

        <!-- submenu for large screens-->
        <nav
          class="w-full px-6 bg-gray-300 text-gray-800 hidden lg:block text-sm"
        >
          <template x-for="menuItem in menuItems">
            <ul
              class="w-full max-w-6xl mx-auto lg:flex items-center pt-4 lg:pt-0"
            >
              <template
                x-for="submenuItem in menuItem.submenuItems"
                :key="submenuItem.id"
              >
                <li x-show="menuItem.path==currentMenu">
                  <a
                    :class="{'text-orange-500 font-black': submenuItem.path==currentSubmenu}"
                    class="lg:py-4 lg:pr-6 py-3 px-0 block border-transparent hover:text-blue-500"
                    :href="`${submenuItem.link}`"
                    x-text="submenuItem.text"
                  ></a>
                </li>
              </template>
            </ul>
          </template>
        </nav>
      </div>
    </div>
  </div>
</header>
